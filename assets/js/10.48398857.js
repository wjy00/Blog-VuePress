(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{489:function(t,s,a){t.exports=a.p+"assets/img/module.cd4af447.png"},490:function(t,s,a){t.exports=a.p+"assets/img/exports.905383b8.png"},553:function(t,s,a){"use strict";a.r(s);var e=a(54),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"四、模块化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、模块化"}},[t._v("#")]),t._v(" 四、模块化")]),t._v(" "),e("h2",{attrs:{id:"_1-模块化的基本概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-模块化的基本概念"}},[t._v("#")]),t._v(" 1. 模块化的基本概念")]),t._v(" "),e("h3",{attrs:{id:"_1-1-什么是模块化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-什么是模块化"}},[t._v("#")]),t._v(" 1.1 什么是模块化")]),t._v(" "),e("p",[e("strong",[t._v("模块化")]),t._v("是指解决一个复杂问题时，自顶向下逐层把系统划分成若干模块的过程。对于整个系统来说，模块是可组合、分解和更换的单元。")]),t._v(" "),e("p",[t._v("编程领域中的模块化，就是"),e("strong",[t._v("遵守固定的规则")]),t._v("，把一个大文件拆成独立并互相依赖的多个小模块。")]),t._v(" "),e("blockquote",[e("p",[t._v("模块化的好处：")]),t._v(" "),e("ul",[e("li",[t._v("提高了代码的复用性")]),t._v(" "),e("li",[t._v("提高了代码的可维护性")]),t._v(" "),e("li",[t._v("可以实现按需加载")])])]),t._v(" "),e("h3",{attrs:{id:"_1-2-模块化规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-模块化规范"}},[t._v("#")]),t._v(" 1.2 模块化规范")]),t._v(" "),e("p",[e("strong",[t._v("模块化规范")]),t._v("就是对代码进行模块化的拆分与组合时，需要遵守的那些规则。")]),t._v(" "),e("p",[t._v("例如：")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("使用什么样的语法格式来引用模块")])]),t._v(" "),e("li",[e("p",[t._v("在模块中使用什么样的语法格式向外暴露成员")])])]),t._v(" "),e("blockquote",[e("p",[t._v("模块化规范的好处：")]),t._v(" "),e("p",[t._v("大家都遵守同样的模块化规范写代码，降低了沟通的成本，极大方便了各个模块之间的相互调用，利人利己。")])]),t._v(" "),e("h2",{attrs:{id:"_2-node-js中的模块化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-node-js中的模块化"}},[t._v("#")]),t._v(" 2. Node.js中的模块化")]),t._v(" "),e("h3",{attrs:{id:"_2-1-node-js-中模块的分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-node-js-中模块的分类"}},[t._v("#")]),t._v(" 2.1 Node.js 中模块的分类")]),t._v(" "),e("p",[t._v("Node.js 中根据模块来源的不同，将模块分为了 3 大类，分别是：")]),t._v(" "),e("ul",[e("li",[t._v("内置模块（内置模块是由 Node.js 官方提供的，例如 fs、path、http 等）")]),t._v(" "),e("li",[t._v("自定义模块（用户创建的每个 .js 文件，都是自定义模块）")]),t._v(" "),e("li",[t._v("第三方模块（由第三方开发出来的模块，并非官方提供的内置模块，也不是用户创建的自定义模块，使用前需要先下载）")])]),t._v(" "),e("h3",{attrs:{id:"_2-2-加载模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-加载模块"}},[t._v("#")]),t._v(" 2.2 加载模块")]),t._v(" "),e("p",[t._v("使用 "),e("code",[t._v("require()")]),t._v(" 方法，可以加载需要的内置模块、用户自定义模块、第三方模块进行使用。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("// 1. 加载内置模块 fs\nconst fs = require('fs')\n// 2. 加载自定义模块 custom\nconst custom = require('./custom')\n// 3. 加载第三方模块\nconst moment = require('moment')\n")])])]),e("blockquote",[e("p",[t._v("注意：使用 require() 方法加载其它模块时，会执行被加载模块中的代码。")])]),t._v(" "),e("h3",{attrs:{id:"_2-3-node-js中模块作用域"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-node-js中模块作用域"}},[t._v("#")]),t._v(" 2.3 Node.js中模块作用域")]),t._v(" "),e("p",[t._v("和函数作用域类似，在自定义模块中定义的变量、方法等成员，只能在当前模块内被访问，这种模块级别的访问限制，叫做"),e("strong",[t._v("模块作用域")]),t._v("。")]),t._v(" "),e("blockquote",[e("p",[t._v("模块作用域的好处: 防止了全局变量污染的问题")])]),t._v(" "),e("h3",{attrs:{id:"_2-4-向外共享模块作用域中的成员"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-向外共享模块作用域中的成员"}},[t._v("#")]),t._v(" 2.4 向外共享模块作用域中的成员")]),t._v(" "),e("ol",[e("li",[e("p",[e("strong",[t._v("module 对象")])]),t._v(" "),e("p",[t._v("在每个 .js 自定义模块中都有一个 module 对象，它里面存储了和当前模块有关的信息，打印如下：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(489),alt:""}})])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("module.exports 对象")])]),t._v(" "),e("p",[t._v("在自定义模块中，可以使用 "),e("strong",[e("code",[t._v("module.exports")])]),t._v(" 对象，将模块内的成员共享出去，供外界使用。")]),t._v(" "),e("p",[t._v("外界用 require() 方法导入自定义模块时，得到的就是 module.exports 所指向的对象。")]),t._v(" "),e("blockquote",[e("p",[t._v("在一个自定义模块中，默认情况下， module.exports = {}")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 向 module.exports 对象上挂载 username 属性")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zs'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 向 module.exports 对象上挂载 sayHello 方法")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sayHello")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'He]llo!'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 向 module.exports 对象上挂载 age 属性")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" age "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" age\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 让 module.exports 指向一个全新的对象")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  nickname"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'小黑'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayHi")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hi!'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("共享成员时的注意点")])]),t._v(" "),e("p",[t._v("使用"),e("code",[t._v("require()")]),t._v(" 方法导入模块时，导入的结果，"),e("strong",[t._v("永远以 "),e("code",[t._v("module.exports")]),t._v(" 指向的对象为准")]),t._v("。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("exports 对象")])]),t._v(" "),e("p",[t._v("由于 "),e("code",[t._v("module.exports")]),t._v("单词写起来比较复杂，为了简化向外共享成员的代码，Node 提供了 "),e("strong",[e("code",[t._v("exports")])]),t._v(" 对象。")]),t._v(" "),e("p",[t._v("默认情况下，"),e("code",[t._v("exports")]),t._v("和"),e("code",[t._v("module.exports")]),t._v(" 指向同一个对象。")]),t._v(" "),e("p",[t._v("最终共享的结果，还是以 "),e("strong",[e("code",[t._v("module.exports")])]),t._v(" 指向的对象为准。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" username "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'aa'")]),t._v("\n\nexports"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" username\nexports"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\nexports"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sayHello")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'大家好！'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("exports 和 module.exports 的使用误区")])]),t._v(" "),e("p",[e("code",[t._v("require()")]),t._v("模块时，得到的永远是 "),e("code",[t._v("module.exports")]),t._v(" 指向的对象：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(490),alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("注意：为了防止混乱，建议不要在同一个模块中同时使用 exports 和 module.exports")])])])]),t._v(" "),e("h3",{attrs:{id:"_2-5-node-js-中的模块化规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-node-js-中的模块化规范"}},[t._v("#")]),t._v(" 2.5 Node.js 中的模块化规范")]),t._v(" "),e("p",[t._v("Node.js 遵循了 "),e("strong",[t._v("CommonJS 模块化规范")]),t._v("，CommonJS 规定了"),e("strong",[t._v("模块的特性")]),t._v("和"),e("strong",[t._v("各模块之间如何相互依赖")]),t._v("。")]),t._v(" "),e("p",[t._v("CommonJS 规定：")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("每个模块内部，"),e("strong",[t._v("module 变量")]),t._v("代表当前模块。")])]),t._v(" "),e("li",[e("p",[t._v("module 变量是一个对象，它的 exports 属性（即 "),e("strong",[t._v("module.exports")]),t._v("）是"),e("strong",[t._v("对外的接口")]),t._v("。")])]),t._v(" "),e("li",[e("p",[t._v("加载某个模块，其实是加载该模块的 module.exports 属性。"),e("strong",[t._v("require() 方法用于加载模块")]),t._v("。")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);